@{
    ViewData["Title"] = "Home page";
}
<style>
    .stone{ background-color: #222; border-radius: 10px 10px 0 0; cursor: pointer; }
</style>

@using (Html.BeginForm("Step1", "Wiz", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <h4>1. Ориентация</h4>

    <table class="table table-borderless w-auto">
        <tr>
            <td style="text-align: center;"><img onclick="$('#o1').click()" src="/img/Vert.png" class="stone" style="width: 12vh; height: 24vh;" /></td>
            <td style="text-align: center;"><img onclick="$('#o2').click()" src="/img/Hor.png" class="stone" style="width: 24vh; height: 12vh;margin-top: 12vh;" /></td>
        </tr>
        <tr>
            <td class="text-center"><label><input type="radio" name="IsVert" onchange="SetVert(true)" id="o1" checked="checked" value="true" /> Вертикальная</label></td>
            <td class="text-center"><label><input type="radio" name="IsVert" onchange="SetVert(false)" id="o2" value="false" /> Горизонтальная</label></td>
        </tr>
    </table>

    <h4 class="mt-3">2. Размер</h4>

    <div class="row">
        <div class="col-md-2">
            <select class="form-select" name="size" id="ddlSize">
                <!option value="40">40 x 80</!option>
                <!option value="50">50 x 100</!option>
                <!option value="60">60 x 120</!option>
            </select>
        </div>
    </div>

    <h4 class="mt-3">3. Число усопших</h4>

    <div class="row">
        <div class="col-md-2">
            <select class="form-select" name="count" id="ddlCount" onchange="ColChange()">
                <!option value="1">Один</!option>
                <!option value="2">Двое</!option>
                <!option disabled="disabled" value="3">Трое</!option>
                <!option disabled="disabled" value="4">Четверо</!option>
            </select>
        </div>
    </div>
    
    <h4 class="mt-3">4. Фото усопших</h4>

    <div class="row">
        <div class="col-md-3" id="f1">
            Фото №1
            <input type="file" name="file" required class="form-control" />
        </div>
        <div class="col-md-3" required style="display: none;" id="f2">Фото №2<input type="file" name="file" class="form-control" /></div>
        <div class="col-md-3" required style="display: none;" id="f3">Фото №3<input type="file" name="file" class="form-control" /></div>
        <div class="col-md-3" required style="display: none;" id="f4">Фото №4<input type="file" name="file" class="form-control" /></div>
    </div>

    <div class="mt-4">
        <input type="submit" class="btn btn-primary" value="Дальше"/>
    </div>
}
@section Scripts
{
    <script>
        function SetVert(isVert) {
            var s = document.getElementById('ddlSize');
            var c = document.getElementById('ddlCount');
            console.log(s.options[0].text );
            s.options[0].text = isVert ? "40 x 80" : "80 x 40";
            s.options[1].text = isVert ? "50 x 100" : "100 x 50";
            s.options[2].text = isVert ? "60 x 120" : "120 x 60";
            
            c.options[2].disabled = isVert;
            c.options[3].disabled = isVert;
            if (isVert && c.selectedIndex>1) {
                c.options[0].selected=true;
                ColChange();
            }
        }

        function ColChange() {
            var count = $('#ddlCount').val() * 1;
            for (var i = 1; i < 5; i++) {
                if (i <= count) {
                    $('#f' + i).show();
                } else {
                    $('#f' + i).hide();
                }
            }
        }
    </script>
}
